<%- model_class = User -%>
<div class="page-header">
  <h1>User List</h1>
  <p>
  	The table below list all currently registered service users. To see
  	more details about the user account, you can click on the account
  	email or the 'show' button. If you want 'edit' or 'destroy', the 
  	corresponding buttons are also availabe for each account record.
  </p>
</div>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Email</th>
      <th>Last Sign In</th>
      <th>Last IP</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Phone</th>
      <th>Role</th>
      <th>Groups</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= link_to user.email, user_path(user) %></td>
        <td><%= user.last_sign_in_at %></td>
        <td><%= user.last_sign_in_ip %></td>
        <td><%= user.first_name %></td>
        <td><%= user.last_name %></td>
        <td><%= number_to_phone(user.phone, delimiter: ".") %></td>
        <td><%= user.role_str %></td>
        <% if user.group_ids.present? %>
        	<td><%= user.group_ids %></td>
        <% else %>
        	<td>None</td>
        <% end %>

        <td>
        	<%= link_to t('.show', :default => t("helpers.links.show")),
                      user_path(user), :class => 'btn btn-mini' %>
          <%= link_to t('.edit', :default => t("helpers.links.edit")),
                      edit_user_path(user), :class => 'btn btn-mini' %>
          <%= link_to t('.delete', :default => t("helpers.links.destroy")),
                      user_path(user),
                      :method => :delete,
                      :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                      :class => 'btn btn-mini btn-danger' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<div class="form-actions">
	<%= link_to t('.new', default: t("helpers.links.new")),
		new_user_path, class: 'btn btn-primary' %>
</div>
